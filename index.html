<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Vente d'Actifs NouvLR</title>

    <link rel="stylesheet" href="style.css">

    <link href="https://fonts.googleapis.com/css2?family=Abel&family=Open+Sans:wght@400;600;700&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>

<header id="main-header">
    <div class="logo-container">
        <img src="nouvlr-logo-white.png" alt="NouvLR Logo" id="company-logo">
    </div>

    <div class="header-right">
        <h1>VENTE D'ACTIFS NOUVLR</h1>

        <nav id="main-nav">
            <button class="nav-btn active" onclick="mostrarSeccion('departments')" data-i18n="nav_departments">Catégories</button>
            <button class="nav-btn" onclick="mostrarSeccion('policy')" data-i18n="nav_policy">Politique</button>
            <button id="lang-toggle" class="nav-btn lang-btn" onclick="toggleLanguage()">EN</button>
        </nav>
    </div>
</header>

<section id="section-home" class="content-section">

    <div class="hero-wrapper">
        <div class="hero-card">
            <div class="pro-badge">
                <i class="fas fa-hard-hat"></i> <span data-i18n="pro_warning">*Vente réservée aux professionnels</span>
            </div>

            <h2 data-i18n="hero_title">Bienvenue sur notre plateforme de vente</h2>

            <div class="hero-text-content" data-i18n="hero_desc">
                <p>Bienvenue sur notre plateforme de vente de matériel excédentaire du consortium NouvLR.</p>
                <p>Notre sélection est rigoureusement évaluée afin de répondre aux standards de qualité, de sécurité et
                    de performance exigés par l’industrie.</p>
                <p>Notre approche s’inscrit dans une vision visant à réduire le gaspillage, optimiser l’utilisation des
                    ressources et diminuer l’empreinte environnementale des projets de construction.</p>
                <p><strong>Nous vous souhaitons une excellente expérience d’achat.</strong></p>
            </div>

            <div class="hero-actions">
                <button class="big-btn" onclick="mostrarSeccion('departments')">
                    <span data-i18n="btn_view_depts">Voir les Départements</span>
                    <i class="fas fa-arrow-right" style="margin-left:10px;"></i>
                </button>
            </div>
        </div>

        <div class="contact-card">
            <div class="contact-text">
                <h3 data-i18n="contact_title">Besoin d'assistance ?</h3>
                <p data-i18n="contact_sub">Pour toute question ou pour planifier une visite avec un responsable :</p>
            </div>

            <div class="contact-item">
                <i class="fas fa-envelope-open-text"></i>
                <a href="mailto:vente-actifs@nouvlr.com">vente-actifs@nouvlr.com</a>
            </div>
        </div>
    </div>

</section>

<section id="section-departments" class="content-section">
    <div class="section-header-styled">
        <h2 data-i18n="nav_departments">CATEGORIES</h2>
        <div class="header-underline"></div>
    </div>

    <div class="categories-grid">
        <a href="catalogue.html?dept=A" class="category-card">
            <img id="img-dept-1" src="icons/IconF1.jpg" alt="Arpentage">
            <span class="category-label" data-i18n="dept_1_title">ARPENTAGE</span>
        </a>
        <a href="catalogue.html?dept=I" class="category-card">
            <img id="img-dept-2" src="icons/IconF2.jpg" alt="Informatique">
            <span class="category-label" data-i18n="dept_2_title">INFORMATIQUE</span>
        </a>
        <a href="catalogue.html?dept=O" class="category-card">
            <img id="img-dept-3" src="icons/IconF3.jpg" alt="Outils">
            <span class="category-label" data-i18n="dept_3_title">OUTILS</span>
        </a>
        <a href="catalogue.html?dept=M" class="category-card">
            <img id="img-dept-4" src="icons/IconF4.jpg" alt="Machinerie">
            <span class="category-label" data-i18n="dept_4_title">MACHINERIE</span>
        </a>
    </div>
</section>

<section id="section-policy" class="content-section hidden">
    <div class="text-container">
        <h2 data-i18n="nav_policy">Politique de Vente</h2>
        <div data-i18n="policy_text"></div>
    </div>
</section>

<script>
    // 6.1 State Management
    let currentLang = 'fr';

    // 6.2 Translation Data Object (JSON-like structure)
    const translationsIndex = {
        fr: {
            // --- Home Section (FR) ---
            hero_title: "Bienvenue sur notre plateforme de vente",
            hero_desc: "<p>Bienvenue sur notre plateforme de vente de matériel excédentaire du consortium NouvLR.</p><p>Notre sélection est rigoureusement évaluée afin de répondre aux standards de qualité, de sécurité et de performance exigés par l’industrie.</p><p>Notre approche s’inscrit dans une vision visant à réduire le gaspillage, optimiser l’utilisation des ressources et diminuer l’empreinte environnementale des projets de construction.</p><p><strong>Nous vous souhaitons une excellente expérience d’achat.</strong></p>",
            btn_view_depts: "Consulter les Départements",
            pro_warning: "*Vente réservée aux professionnels",
            contact_title: "Service aux acheteurs",
            contact_sub: "Pour toute question ou pour planifier une visite avec un responsable :",

            // --- Navigation & Policy (FR) ---
            nav_departments: "CATÉGORIES",
            nav_policy: "Politique de Vente",
            policy_text: `
                <ol class="policy-list">
                    <li><strong>Vente Finale:</strong> Afin d'assurer la transparence et la clarté, nous vous informons que toutes les ventes sont finales. Une fois la vente complétée, aucune modification ne pourra être effectuée.</li>
                    <li><strong>État des Articles:</strong> Les articles sont vendus dans leur état actuel (« tel quel »), sans garantie additionnelle et sans possibilité de retour, d'échange ou de remboursement.</li>
                    <li><strong>Inspection Recommandée:</strong> Nous vous recommandons fortement de venir sur place pour vérifier attentivement chaque produit avant de conclure la transaction.</li>
                    <li><strong>Taxes:</strong> Les taxes applicables ne sont pas incluses dans les prix affichés.</li>
                    <li><strong>Paiement:</strong> Après acceptation de la vente, le client s'engage à effectuer le paiement intégral dans un délai de cinq (5) jours ouvrables. Passé ce délai, des frais ou conditions additionnels pourraient s'appliquer.</li>
                    <li><strong>Livraison:</strong> Le délai de livraison est de dix (10) jours ouvrables après réception du paiement, et la marchandise peut être expédiée par notre transporteur ou le vôtre.</li>
                </ol>
                <div class="policy-footer">
                    <p>Contactez-nous à l'adresse courriel <a href="mailto:vente-actifs@nouvlr.com">vente-actifs@nouvlr.com</a> pour une prise de rendez-vous avec notre représentant.</p>
                </div>
            `,
            btn_access_catalog: "Accéder au Catalogue",

            // --- Departments (FR) ---
            dept_1_title: "ARPENTAGE",
            dept_1_desc: "Fort d'une équipe ayant compté plus de cent arpenteurs, ce département a investi dans les technologies de pointe pour garantir une précision irréprochable. Notre inventaire comprend une vaste gamme d’équipements, des stations totales aux drones, incluant accessoires, outils de marquage, quincaillerie et véhicules spécializados, dont un chariot ferroviaire électrique.",
            dept_2_title: "INFORMATIQUE ET MATÉRIEL DE BUREAU",
            dept_2_desc: "Au cœur d’un projet ayant accueilli jusqu’à 5 000 collaborateurs, NouvLR a toujours misé sur une infrastructure technologique de premier plan. Découvrez une large sélection de matériel informatique (hardware), ainsi qu'une vaste gamme de mobilier de bureau, fournitures administratives, électroménagers et systèmes d’impression.",
            dept_3_title: "MATÉRIEL ET OUTILS",
            dept_3_desc: "Reflet des travaux colossaux réalisés sur un tracé de 67 km incluant tunnels, infrastructures ferroviaires et génie urbain, notre inventaire couvre tous les besoins de la construction moderne : outillage divers, quincaillerie, matériaux variés, équipements de sécurité et de gestion de trafic.",
            dept_4_title: "MACHINERIE",
            dept_4_desc: "Bien que ce catalogue ne propose pas de machinerie lourde, cette sección regroupe une sélection complète de petits équipements et de machinerie légère. Ces actifs proviennent d'un projet d'envergure nationale, garantissant fiabilité et performance pour vos opérations.",
        },
        en: {
            // --- Home Section (EN) ---
            hero_title: "Welcome to our sales platform",
            hero_desc: "<p>Welcome to our platform for selling excess equipment from the NouvLR consortium.</p><p>Our selection is rigorously evaluated to meet the quality, safety, and performance standards required by the industry.</p><p>Our approach aligns with a vision aimed at reducing waste, optimizing resource use, and lowering the environmental footprint of construction projects.</p><p><strong>We wish you an excellent purchasing experience.</strong></p>",
            btn_view_depts: "View Departments",
            pro_warning: "*Sale reserved for professionals",
            contact_title: "Buyer Services",
            contact_sub: "For questions or to schedule an appointment with a manager:",

            // --- Navigation & Policy (EN) ---
            nav_departments: "DEPARTEMENTS",
            nav_departments: "CATEGORIES",
            nav_policy: "Sales Policy",
            policy_text: `
                <ol class="policy-list">
                    <li><strong>Final Sale:</strong> To ensure transparency and clarity, please be advised that all sales are final. Once the sale is completed, no modifications can be made.</li>
                    <li><strong>Condition of Items:</strong> Items are sold in their current condition ("as is"), without additional warranty and without the possibility of return, exchange, or refund.</li>
                    <li><strong>Recommended Inspection:</strong> We strongly recommend visiting the site to carefully inspect each product before concluding the transaction.</li>
                    <li><strong>Taxes:</strong> Applicable taxes are not included in the displayed prices.</li>
                    <li><strong>Payment:</strong> Upon acceptance of the sale, the client agrees to make full payment within five (5) business days. Beyond this period, additional fees or conditions may apply.</li>
                    <li><strong>Delivery:</strong> The delivery timeframe is ten (10) business days after receipt of payment, and the goods can be shipped via our carrier or yours.</li>
                </ol>
                <div class="policy-footer">
                    <p>Contact us at <a href="mailto:vente-actifs@nouvlr.com">vente-actifs@nouvlr.com</a> to schedule an appointment with our representative.</p>
                </div>
            `,
            btn_access_catalog: "Access Catalog",

            // --- Departments (EN) ---
            dept_1_title: "SURVEYING",
            dept_1_desc: "With a team that peaked at over a hundred surveyors, this department invested in cutting-edge technology to ensure superior precision. Our inventory offers a wide range of assets, from total stations and drones to specialized marking tools, hardware, vehicles, and even a custom-designed electric rail cart.",
            dept_2_title: "IT AND OFFICE EQUIPMENT",
            dept_2_desc: "Supporting a massive project of up to 5,000 employees, NouvLR consistently prioritized top-tier technological infrastructure. This section features a comprehensive selection of IT hardware, surplus office furniture, administrative supplies, appliances, and high-capacity photocopiers.",
            dept_3_title: "EQUIPMENT AND TOOLS",
            dept_3_desc: "Reflecting the monumental work across a 67-kilometer site—spanning tunnels, railway infrastructure, and urban development—our surplus inventory covers every facet of modern construction, including diverse tools, hardware, safety equipment, and traffic management systems.",
            dept_4_title: "MACHINERY",
            dept_4_desc: "While heavy machinery is not featured in this catalog, this section encompasses a wide variety of light machinery and small equipment. These assets stem from a landmark national project, ensuring quality and utility for your operations.",
        }
    };

    /**
     * 6.3 UI Logic: Section Navigation
     * Switches the visible section (Home, Departments, Policy) and updates active nav buttons.
     */
    function mostrarSeccion(id) {
        // Ocultar todas las secciones
        document.querySelectorAll('.content-section').forEach(s => s.classList.add('hidden'));

        // Mostrar la sección seleccionada
        const section = document.getElementById('section-' + id);
        if (section) section.classList.remove('hidden');

        // Actualizar el estado de los botones del menú
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));

        // Seleccionamos los botones por su atributo data-i18n para ser precisos
        if (id === 'departments') {
            document.querySelector('[data-i18n="nav_departments"]').classList.add('active');
        } else if (id === 'policy') {
            document.querySelector('[data-i18n="nav_policy"]').classList.add('active');
        }
    }

    /**
     * 6.4 UI Logic: Apply Translations
     * Updates all text and images based on 'currentLang' state.
     */
    function aplicarTraducciones() {
        const t = translationsIndex[currentLang];

        // Update Language Toggle Button Text
        document.getElementById('lang-toggle').textContent = currentLang === 'fr' ? 'EN' : 'FR';

        // Update Text Elements (using data-i18n attribute)
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if(t[key]) {
                // Use innerHTML for rich text (policy, descriptions), textContent for simple labels
                if(key === 'hero_desc' || key === 'policy_text') {
                    el.innerHTML = t[key];
                } else {
                    el.textContent = t[key];
                }
            }
        });

        // Update Department Images (IconF vs IconE)
        const letter = currentLang === 'fr' ? 'F' : 'E';
        for(let i=1; i<=4; i++) {
            const img = document.getElementById(`img-dept-${i}`);
            if(img) img.src = `icons/Icon${letter}${i}.jpg`;
        }
    }

    /**
     * 6.5 UI Logic: Language Toggle
     * Switches state and re-applies translations.
     */
    function toggleLanguage() {
        currentLang = currentLang === 'fr' ? 'en' : 'fr';
        aplicarTraducciones();
    }
// 6.6 Initialization & Stock Check
document.addEventListener('DOMContentLoaded', () => {
    // 1. Forzamos la vista de Categorías y aplicamos idiomas
    mostrarSeccion('departments');
    aplicarTraducciones();

    // 2. Verificamos el inventario para desactivar categorías vacías
    fetch('catalog.json')
        .then(response => response.json())
        .then(data => {
            // Mapeo de los prefijos de lote por departamento
            const depts = {
                'A': 'A-', // Arpentage
                'I': 'I-', // Informatique
                'O': 'O-', // Outils
                'M': 'M-'  // Machinerie
            };

            Object.keys(depts).forEach(key => {
                const prefix = depts[key];
                // Comprobamos si hay al menos un producto con ese prefijo
                const tieneStock = data.some(item => item.lot && item.lot.toString().startsWith(prefix));

                // Buscamos el enlace que contiene el código del departamento
                const card = document.querySelector(`a[href*="dept=${key}"]`);

                if (card && !tieneStock) {
                    card.classList.add('disabled'); // Añade el estado "apagado"
                    card.style.pointerEvents = 'none'; // Desactiva el clic
                    card.style.opacity = '0.4'; // Lo hace semitransparente
                    card.style.filter = 'grayscale(1)'; // Lo pone en blanco y negro
                }
            });
        })
        .catch(err => console.error("Error al verificar stock:", err));
});
</script>
</body>
</html>